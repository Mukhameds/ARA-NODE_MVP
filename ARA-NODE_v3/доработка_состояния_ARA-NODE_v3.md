Проведён **глубокий аудит** по файлам `main.md`, `core.md`, `internal.md`, `config.md`, `test_12.md`.

---

## **Полный список слабых мест и недоработок ARA-NODE v3 (production-анализ)**

### **I. cmd/main.go**

| Недоработка                                       | Что делать                                     |
| ------------------------------------------------- | ---------------------------------------------- |
| Нет CLI-команд `help`, `sync`, `delete`, `export` | Вставить командный парсер (`switch`)           |
| Нет CLI-режима без Bootstrap                      | Добавить флаг `bootstrapDone.json`             |
| Нет логов ошибок (`panic`, `nil`)                 | Добавить `defer recover + log.Fatal`           |
| Повторы вводов не фильтруются                     | Вызов `ExistsSimilarSignal()` до ProcessSignal |
| Нет режима авто/беззвучной генерации              | Добавить флаг `--silent`, `--background`       |

---

### **II. core/memory\_engine.go**

| Проблема                                   | Рекомендация                                         |
| ------------------------------------------ | ---------------------------------------------------- |
| Линейный поиск по всем QBit                | Ввести индексы: `map[string][]string` по тегам, типу |
| Нет TTL или auto-decay без external вызова | Встроить `LastAccessed`, decay по таймеру            |
| Нет `ExportJSON()`, `ImportJSON()`         | Нужно для резервного копирования, P2P обмена         |
| Не логируются удалённые/архивные QBit      | Добавить `fmt.Println("[Deleted]", id)`              |
| Нет удаления по тегу                       | `DeleteByTag(tag string)`                            |
| Повторы по Content сохраняются             | Встроить проверку `if Exists(content, phase, tol)`   |

---

### **III. core/ghost\_engine.go**

| Проблема                                    | Рекомендация                                |
| ------------------------------------------- | ------------------------------------------- |
| Нет логов если сигнал не сработал           | Добавить: `[Ghost] No reaction for signal:` |
| Нет команды удаления/деактивации блока      | `Unregister(type string)`                   |
| Нет тегов `silent`, `interrupt`, `ethereal` | Ввести специальные реакционные классы       |

---

### **IV. core/will\_engine.go**

| Проблема                                    | Рекомендация                                              |
| ------------------------------------------- | --------------------------------------------------------- |
| Не объясняет `❌ Rejected`                   | Лог причины отказа: `phase low`, `not aligned`, `emotion` |
| Нет адаптации при многократных отказах      | Отслеживать `reject count`, вызывать эмоцию `apathy`      |
| Не сравнивает фантом с CoreMission напрямую | Вставить сравнение по ключевым словам                     |

---

### **V. core/attention\_engine.go**

| Проблема                         | Рекомендация                                       |
| -------------------------------- | -------------------------------------------------- |
| Нет логов активированных мыслей  | `fmt.Println("[Attention] Triggered:", q.Content)` |
| Нет подавления при user input    | `Suppress(5 * time.Second)` при CLI вводе          |
| Всегда возбуждает одиночный QBit | Ввести пачку `TriggerChain()` или `FuzzedGroup()`  |

---

### **VI. core/helpers.go**

| Проблема                                           | Рекомендация                                |
| -------------------------------------------------- | ------------------------------------------- |
| Нет `NormalizeInput`, `ParseCommand`, `SignalHash` | Нужны для сравнения, CLI-команд, дубликатов |

---

### **VII. internal/bootstrap.go**

| Проблема                            | Рекомендация                                             |
| ----------------------------------- | -------------------------------------------------------- |
| Запускается при каждом старте       | Проверять `bootstrap.json exists`                        |
| Нет `UserMap.json` сохранения       | Сохранять когнитивный профиль в `data/user_profile.json` |
| Не обучается автоматически от входа | `dict.LearnFromInput()` должен выделять морфемы/связи    |

---

### **VIII. internal/github\_sync.go**

| Проблема                               | Рекомендация                       |
| -------------------------------------- | ---------------------------------- |
| Нет fallback если GitHub недоступен    | Добавить local-only sync           |
| Нет конфигурации через `.env` или JSON | `loadConfig("sync_config.json")`   |
| Нет retries и логов ошибок             | `log.Println("[Sync Error]", err)` |

---

### **IX. internal/phantom.go**

| Проблема                             | Рекомендация                                  |
| ------------------------------------ | --------------------------------------------- |
| Повторяющиеся фантомы не блокируются | Сравнение не только Content, но и SourceIDs   |
| Нет визуализации дерева              | Добавить `phantom_tree.json` генератор        |
| Фантомы возбуждаются на user input   | Ввести `phantom_lock = true` при ручном вводе |

---

### **X. internal/decay\_analysis\_engine.go**

| Проблема                              | Рекомендация                                     |
| ------------------------------------- | ------------------------------------------------ |
| Работает в фоне, но не влияет на волю | Сделать `q.Weight → WillEngine` если ниже порога |
| Нет приоритетов по тегу               | Эмоциональные QBit нельзя удалять сразу          |

---

## ✅ Сводный список ключевых доработок (в виде чек-листа)

| Модуль               | Действие                                              |
| -------------------- | ----------------------------------------------------- |
| main.go              | CLI-команды: help, sync, delete, export               |
| memory\_engine.go    | Индексы, экспорт/импорт JSON, авто-decay, DeleteByTag |
| ghost\_engine.go     | Логика непринятых сигналов, unregister блоков         |
| will\_engine.go      | Объяснение отказов, reject-трейс, сравнение с миссией |
| attention\_engine.go | suppression, лог возбуждений, пачечный сигнал         |
| phantom.go           | SourceHash, дерево, блок на user-trigger              |
| bootstrap.go         | JSON сохранение, repeat check, нормализация           |
| github\_sync.go      | `.env`, fallback, retry, logging                      |
| emotion\_engine.go   | Команда `view emotions`, влияние на фазу              |
| helpers.go           | ParseCommand, SignalHash, NormalizeText               |

---


1. CLI
2. MemoryEngine
3. Will + Phantom
4. Ghost Logic
5. Emotion + Bootstrap
6. Полный JSON экспорт/импорт всей памяти
